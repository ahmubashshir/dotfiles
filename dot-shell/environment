#!/bin/sh
if [ -x /bin/zsh ]; then
	eval "$(
		zsh -c 'env' |
			grep -Ev '^(WINDOWID|_|SHLVL|OLDPWD)=' |
			awk '{printf "%s\0", $0}' |
			xargs -0 printf 'export %q\n'
	)"
else
	eval "$(grep ^ZDOTDIR ~/.zshenv)"
	for each in api-keys common; do
		source "$ZDOTDIR/env.d/$each"
	done
	eval "$(dircolors -b ~/.shell/dircolors 2> /dev/null || dircolors -b 2> /dev/null)"
	export BROWSER=links
	if [ -n "$DISPLAY" ]; then
		source "$ZDOTDIR/env.d/gui"
	fi
fi
